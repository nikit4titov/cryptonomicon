(function(e){function t(t){for(var r,a,o=t[0],s=t[1],l=t[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==c[s]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/cryptonomicon/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c=(n("498a"),n("4de4"),n("b0c0"),{class:"container mx-auto flex flex-col items-center bg-gray-100 p-4"}),i={key:0,class:"\n        fixed\n        w-100\n        h-100\n        opacity-80\n        bg-purple-800\n        inset-0\n        z-50\n        flex\n        items-center\n        justify-center\n      "},a=Object(r["e"])("svg",{class:"animate-spin -ml-1 mr-3 h-12 w-12 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[Object(r["e"])("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Object(r["e"])("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),o=[a],s={class:"container"},l={class:"flex"},u={class:"max-w-xs"},d=Object(r["e"])("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1),f={class:"mt-1 relative rounded-md shadow-md"},b=["value"],p={key:0,class:"flex bg-white shadow-md p-1 rounded-md shadow-md flex-wrap"},h=["onClick"],g={key:1,class:"text-sm text-red-600"},m={key:2,class:"text-sm text-red-600"},O=Object(r["e"])("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[Object(r["e"])("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})],-1),j=Object(r["f"])(" Добавить "),v=[O,j],y=Object(r["e"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),k={class:"max-w-xs"},x=Object(r["f"])(" Фильтр: "),w=["value"],T=Object(r["e"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),S={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},C=["onClick"],P={class:"px-4 py-5 sm:p-6 text-center"},E={class:"text-sm font-medium text-gray-500 truncate"},M={class:"mt-1 text-3xl font-semibold text-gray-900"},z=Object(r["e"])("div",{class:"w-full border-t border-gray-200"},null,-1),N=["onClick"],I=Object(r["e"])("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#718096","aria-hidden":"true"},[Object(r["e"])("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),G=Object(r["f"])(" Удалить "),U=[I,G],_=Object(r["e"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),A={key:1,class:"relative"},D={class:"text-lg leading-6 font-medium text-gray-900 my-8"},J={class:"flex items-end border-gray-600 border-b border-l h-64"},L=Object(r["e"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",x:"0",y:"0",viewBox:"0 0 511.76 511.76","xml:space":"preserve"},[Object(r["e"])("g",null,[Object(r["e"])("path",{d:"M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z",fill:"#718096","data-original":"#000000"})])],-1),R=[L];function B(e,t,n,a,O,j){return Object(r["i"])(),Object(r["d"])("div",c,[O.loading?(Object(r["i"])(),Object(r["d"])("div",i,o)):Object(r["c"])("",!0),Object(r["e"])("div",s,[Object(r["e"])("section",null,[Object(r["e"])("div",l,[Object(r["e"])("div",u,[d,Object(r["e"])("div",f,[Object(r["e"])("input",{value:O.ticker,onInput:t[0]||(t[0]=function(e){return O.ticker=e.target.value.trim().toUpperCase()}),onKeydown:t[1]||(t[1]=Object(r["l"])((function(){return j.addTicker&&j.addTicker.apply(j,arguments)}),["enter"])),type:"text",name:"wallet",id:"wallet",class:"\n                  block\n                  w-full\n                  pr-10\n                  border-gray-300\n                  text-gray-900\n                  focus:outline-none focus:ring-gray-500 focus:border-gray-500\n                  sm:text-sm\n                  rounded-md\n                ",placeholder:"Например DOGE"},null,40,b)]),O.tips.length>0?(Object(r["i"])(),Object(r["d"])("div",p,[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["j"])(O.tips,(function(e){return Object(r["i"])(),Object(r["d"])("span",{key:e,onClick:function(t){return j.onTipClick(e)},class:"\n                  inline-flex\n                  items-center\n                  px-2\n                  m-1\n                  rounded-md\n                  text-xs\n                  font-medium\n                  bg-gray-300\n                  text-gray-800\n                  cursor-pointer\n                "},Object(r["k"])(e),9,h)})),128))])):Object(r["c"])("",!0),O.tipsError?(Object(r["i"])(),Object(r["d"])("div",g," Не удалось загрузить подсказки ")):Object(r["c"])("",!0),j.hasTickerError?(Object(r["i"])(),Object(r["d"])("div",m," Такой тикер уже добавлен ")):Object(r["c"])("",!0)])]),Object(r["e"])("button",{onClick:t[2]||(t[2]=function(){return j.addTicker&&j.addTicker.apply(j,arguments)}),type:"button",class:"\n            my-4\n            inline-flex\n            items-center\n            py-2\n            px-4\n            border border-transparent\n            shadow-sm\n            text-sm\n            leading-4\n            font-medium\n            rounded-full\n            text-white\n            bg-gray-600\n            hover:bg-gray-700\n            transition-colors\n            duration-300\n            focus:outline-none\n            focus:ring-2\n            focus:ring-offset-2\n            focus:ring-gray-500\n          "},v)]),y,Object(r["e"])("div",k,[x,Object(r["e"])("input",{value:O.filter,onInput:t[3]||(t[3]=function(e){return O.filter=e.target.value.trim().toUpperCase()}),type:"text",class:"\n            block\n            w-full\n            pr-10\n            border-gray-300\n            text-gray-900\n            focus:outline-none focus:ring-gray-500 focus:border-gray-500\n            sm:text-sm\n            rounded-md\n          "},null,40,w),Object(r["e"])("div",null,[O.page>1?(Object(r["i"])(),Object(r["d"])("button",{key:0,onClick:t[4]||(t[4]=function(e){return O.page-=1}),class:"\n              m-1\n              my-4\n              inline-flex\n              items-center\n              py-2\n              px-4\n              border border-transparent\n              shadow-sm\n              text-sm\n              leading-4\n              font-medium\n              rounded-full\n              text-white\n              bg-gray-600\n              hover:bg-gray-700\n              transition-colors\n              duration-300\n              focus:outline-none\n              focus:ring-2\n              focus:ring-offset-2\n              focus:ring-gray-500\n            "}," Назад ")):Object(r["c"])("",!0),j.hasNextPage?(Object(r["i"])(),Object(r["d"])("button",{key:1,onClick:t[5]||(t[5]=function(e){return O.page+=1}),class:"\n              m-1\n              my-4\n              inline-flex\n              items-center\n              py-2\n              px-4\n              border border-transparent\n              shadow-sm\n              text-sm\n              leading-4\n              font-medium\n              rounded-full\n              text-white\n              bg-gray-600\n              hover:bg-gray-700\n              transition-colors\n              duration-300\n              focus:outline-none\n              focus:ring-2\n              focus:ring-offset-2\n              focus:ring-gray-500\n            "}," Вперед ")):Object(r["c"])("",!0)])]),j.paginatedTickers.length>0?(Object(r["i"])(),Object(r["d"])(r["a"],{key:0},[T,Object(r["e"])("dl",S,[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["j"])(j.paginatedTickers,(function(e){return Object(r["i"])(),Object(r["d"])("div",{key:e.name,onClick:function(t){return j.selectTicker(e)},class:Object(r["g"])([{"border-4":e===O.selectedTicker},"\n              bg-white\n              overflow-hidden\n              shadow\n              rounded-lg\n              border-purple-800 border-solid\n              cursor-pointer\n            "])},[Object(r["e"])("div",P,[Object(r["e"])("dt",E,Object(r["k"])(e.name)+" - USD ",1),Object(r["e"])("dd",M,Object(r["k"])(j.formatPrice(e.price)),1)]),z,Object(r["e"])("button",{onClick:Object(r["m"])((function(t){return j.removeTicker(e)}),["stop"]),class:"\n                flex\n                items-center\n                justify-center\n                font-medium\n                w-full\n                bg-gray-100\n                px-4\n                py-4\n                sm:px-6\n                text-md text-gray-500\n                hover:text-gray-600 hover:bg-gray-200 hover:opacity-20\n                transition-all\n                focus:outline-none\n              "},U,8,N)],10,C)})),128))]),_],64)):Object(r["c"])("",!0),O.selectedTicker?(Object(r["i"])(),Object(r["d"])("section",A,[Object(r["e"])("h3",D,Object(r["k"])(O.selectedTicker.name)+" - USD ",1),Object(r["e"])("div",J,[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["j"])(j.normalizedGraph,(function(e,t){return Object(r["i"])(),Object(r["d"])("div",{key:t,style:Object(r["h"])({height:"".concat(e,"%")}),class:"bg-purple-800 border w-10"},null,4)})),128))]),Object(r["e"])("button",{onClick:t[6]||(t[6]=function(e){return O.selectedTicker=null}),type:"button",class:"absolute top-0 right-0"},R)])):Object(r["c"])("",!0)])])}var V=n("2909"),H=n("53ca"),F=n("b85c"),W=n("1da1"),Y=(n("96cf"),n("c1f9"),n("d3b7"),n("ddb0"),n("3ca3"),n("2b3d"),n("159b"),n("b680"),n("7db0"),n("caad"),n("2532"),n("d81d"),n("fb6a"),n("99af"),n("2ef0")),K=n.n(Y),q=(n("4ec9"),n("07ac"),"51f80a32cb1a3afe031b5bf8115354e6bb531da8151b4d5b5684fdf89d058862"),Q=new Map,X=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=".concat(q)),Z="5";X.addEventListener("message",(function(e){var t,n=JSON.parse(e.data),r=n.TYPE,c=n.FROMSYMBOL,i=n.PRICE;if(r===Z&&void 0!==i){var a=null!==(t=Q.get(c))&&void 0!==t?t:[];a.forEach((function(e){return e(i)}))}}));var $=function(e,t){var n,r=null!==(n=Q.get(e))&&void 0!==n?n:[];Q.set(e,[].concat(Object(V["a"])(r),[t])),ee(e)},ee=function(e){re({action:"SubAdd",subs:["".concat(Z,"~CCCAGG~").concat(e,"~USD")]})},te=function(e){Q.delete(e),ne(e)},ne=function(e){re({action:"SubRemove",subs:["".concat(Z,"~CCCAGG~").concat(e,"~USD")]})},re=function(e){var t=JSON.stringify(e);X.readyState!==WebSocket.OPEN?X.addEventListener("open",(function(){return X.send(t)}),{once:!0}):X.send(t)},ce=function(){return fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true&api_key=".concat(q)).then((function(e){return e.json()})).then((function(e){return Object.values(e.Data)}))},ie={name:"App",data:function(){return{ticker:"",filter:"",tickers:[],selectedTicker:null,graph:[],page:1,coins:[],tips:[],loading:!1,tipsError:!1}},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){var n,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,n=Object.fromEntries(new URL(window.location).searchParams.entries()),r=["page","filter"],r.forEach((function(t){n[t]&&(e[t]=n[t])})),c=localStorage.getItem("tickers"),c&&(e.tickers=JSON.parse(c),e.tickers.forEach((function(t){$(t.name,(function(n){e.updateTicker({tickerName:t.name,newPrice:n})}))}))),t.prev=6,t.next=9,ce();case 9:e.coins=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](6),e.tipsError=!0;case 15:e.debouncedGetTips=K.a.debounce(e.getTips,100),e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[6,12]])})))()},methods:{formatPrice:function(e){return"-"===e?e:e>1?e.toFixed(2):e.toPrecision(2)},addTicker:function(){var e=this;if(this.ticker&&!this.hasTickerError){var t={name:this.ticker,price:"-"};this.tickers.push(t),$(t.name,(function(n){e.updateTicker({tickerName:t.name,newPrice:n})})),this.ticker=""}},updateTicker:function(e){var t=e.tickerName,n=e.newPrice,r=this.tickers.find((function(e){return e.name===t}));r.price=n,r===this.selectedTicker&&this.graph.push(n)},onTipClick:function(e){this.ticker=e,this.addTicker()},removeTicker:function(e){this.tickers=this.tickers.filter((function(t){return t!==e})),te(e.name),this.selectedTicker===e&&(this.selectedTicker=null)},selectTicker:function(e){this.selectedTicker=e},getTips:function(){var e=this;if(this.ticker){var t,n=[],r=Object(F["a"])(this.coins);try{var c=function(){var r=t.value;return e.tickers.find((function(e){return e.name===r.Symbol}))?"continue":(r.Symbol.includes(e.ticker)||r.FullName.toUpperCase().includes(e.ticker))&&(n.push(r.Symbol),4===n.length)?(e.tips=n,{v:void 0}):void 0};for(r.s();!(t=r.n()).done;){var i=c();if("continue"!==i&&"object"===Object(H["a"])(i))return i.v}}catch(a){r.e(a)}finally{r.f()}this.tips=n}else this.tips=[]}},computed:{normalizedGraph:function(){var e=Math.min.apply(Math,Object(V["a"])(this.graph)),t=Math.max.apply(Math,Object(V["a"])(this.graph));return e===t?this.graph.map((function(){return 50})):this.graph.map((function(n){return 5+95*(n-e)/(t-e)}))},startIndex:function(){return 6*(this.page-1)},endIndex:function(){return 6*this.page},filteredTickers:function(){var e=this;return this.tickers.filter((function(t){return t.name.includes(e.filter)}))},hasNextPage:function(){return this.filteredTickers.length>this.endIndex},paginatedTickers:function(){return this.filteredTickers.slice(this.startIndex,this.endIndex)},pageOptionsState:function(){return{filter:this.filter,page:this.page}},hasTickerError:function(){var e,t=Object(F["a"])(this.tickers);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.name===this.ticker)return!0}}catch(r){t.e(r)}finally{t.f()}return!1}},watch:{pageOptionsState:function(e){window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(e.filter,"&page=").concat(e.page))},filter:function(){this.page=1},ticker:function(){this.ticker||(this.tips=[]),this.tipsError=!1,this.debouncedGetTips()},tickers:{handler:function(){localStorage.setItem("tickers",JSON.stringify(this.tickers))},deep:!0},paginatedTickers:function(){0===this.paginatedTickers.length&&this.page>1&&(this.page-=1)},selectedTicker:function(){this.graph=[]},coins:function(){0===this.coins.length&&(this.tipsError=!0)}}};ie.render=B;var ae=ie;n("ba8c");Object(r["b"])(ae).mount("#app")},ba8c:function(e,t,n){}});
//# sourceMappingURL=app.efb6bbae.js.map